{
    "AS_AppEvents_ib0bddbfba16446ca255c7ff36d2d4b8": {
        "id": "AS_AppEvents_ib0bddbfba16446ca255c7ff36d2d4b8",
        "type": "ACTION_SEQUENCE",
        "name": "Desktop_appservice_event_call",
        "params": [{
            "datatype": "collection",
            "name": "eventobject"
        }],
        "language": "js",
        "actions": [{
            "id": "ADD_SNIPPET__f6039450f30d4362a2e5d1a07a4833f9",
            "type": "ADD_SNIPPET",
            "codeSnippet": "kony.print(\"appservice event start-->\");\nfrmHome_loadingIndicator();\nkony.print(\"appservice eventobject:::\"+JSON.stringify(eventobject.launchmode))\n//serviceIntegration.initMF();\n\n//alert(JSON.stringify(params));\n// if (eventobject.launchparams['formID']) {\n//   var formID = eventobject.launchparams['formID'];\n//   return formID;\n// }\n\n\ndeepLinkInfo.clear();\nif(eventobject.launchmode == \"3\" && eventobject.launchparams.from == \"epic\"){\n\tvar launchParams = eventobject.launchparams;\n  //kony.print(\"appservice launchParams:::\"+JSON.stringify(launchParams))\n  \tdeepLinkInfo.isDeepLinkFlow = true;\n\tdeepLinkInfo.isFromEpic = true;\n\tdeepLinkInfo.isRefreshFlow = false;\n\tdeepLinkInfo.epicUserID = launchParams.epicUserID!=null ? launchParams.epicUserID : \"\";\n\tdeepLinkInfo.epicInstanceToken = launchParams.epicInstanceToken!=null ? launchParams.epicInstanceToken : \"\"; \n\tdeepLinkInfo.facilityID = launchParams.facilityID!=null ? launchParams.facilityID : \"\";\n    deepLinkInfo.patientID = launchParams.patientID!=null ? launchParams.patientID : \"\";\t  \n\tdeepLinkInfo.action = launchParams.action!=null ? launchParams.action : \"\";\t  \n  \tdeepLinkInfo.lastName = launchParams.lastName!=null ? launchParams.lastName : \"\";\n\tdeepLinkInfo.firstName = launchParams.firstName!=null ? launchParams.firstName : \"\";\n\tdeepLinkInfo.blueBookId = launchParams.blueBookId!=null ? launchParams.blueBookId : \"\";\n\tdeepLinkInfo.facilityName = launchParams.facilityName!=null ? launchParams.facilityName : \"\";\n\tdeepLinkInfo.userName = launchParams.userName!=null ? launchParams.userName : \"\";\t  \n\tkony.print(\"appService deepLinkInfo:::\"+JSON.stringify(deepLinkInfo));\n\tloginModule.epicUser(deepLinkInfo);//loginModule.loginAuthenticateByToken();\n\treturn frmHome;\n} else if (eventobject.launchmode == \"3\") {  \n  var launchParams = eventobject.launchparams;\n  //kony.print(\"appservice launchParams:::\"+JSON.stringify(launchParams))\n  deepLinkInfo.isDeepLinkFlow = true;\n  deepLinkInfo.isRefreshFlow = false;\n  deepLinkInfo.iHealUserID = launchParams.iHealUserID!=null ? launchParams.iHealUserID : \"\";\n  deepLinkInfo.iHealAccessToken = launchParams.iHealAccessToken!=null ? launchParams.iHealAccessToken : \"\";\n  \n  deepLinkInfo.facilityID = launchParams.facilityID!=null ? launchParams.facilityID : \"\";\n  deepLinkInfo.patientID = launchParams.patientID!=null ? launchParams.patientID : \"\";\n  \n  deepLinkInfo.action = launchParams.action!=null ? launchParams.action : \"\";\n  deepLinkInfo.cipherTexts = launchParams.cipherTexts!=null ? launchParams.cipherTexts : \"\";\n  \n  kony.print(\"appService deepLinkInfo:::\"+JSON.stringify(deepLinkInfo));\n  loginModule.loginAuthenticateByToken();\n  return frmHome;\n\n}else{\n//   var launchParams = eventobject.launchparams;\n//   kony.print(\"appservice launchParams:::\"+JSON.stringify(launchParams))\n  \n  \n  if(typeof(Storage) !== \"undefined\") {\n    if (sessionStorage.clickcount) {\n      sessionStorage.clickcount = Number(sessionStorage.clickcount)+1;\n    } else {\n      sessionStorage.clickcount = 1;\n    }\n    kony.print(\"sessionStorage.clickcount\"+sessionStorage.clickcount);\n  \n  \n    deepLinkInfo.isDeepLinkFlow = false;\n    var userName = kony.store.getItem(\"userName\");\n    var password = kony.store.getItem(\"password\");\n\n    if (sessionStorage.clickcount > 1 && eventobject.launchparams['formID']) {\n      var formID = eventobject.launchparams['formID'];\n      kony.print(\"deepLinkInfo.formId1::::\"+formID);\n      deepLinkInfo.formId = formID;\n      kony.print(\"deepLinkInfo.formId2::::\"+formID);\n\n      if(userName!=null && userName!=\"\" && password!=null && password!=\"\" && formID != \"frmSelectFacility\" && formID != \"frmLanding\"){\n        deepLinkInfo.isRefreshFlow = true;\n        loginModule.loginAuthentication(userName, password);\n        return frmHome;\n\n      }else{\n        loginModule.clearUserStoreItems(); //kony.store.clear();\n        return frmLogin;\n      }\n\n    }else{\n      loginModule.clearUserStoreItems(); //kony.store.clear();\n      return frmLogin;\n    }\n  }else{\n    loginModule.clearUserStoreItems(); //kony.store.clear();\n    return frmLogin;\n  }\n  \n  \n\n}\n//userInfo.clear();\n//patientListConstants.clear();\nkony.print(\"appservice event end-->\");\nloginModule.clearUserStoreItems(); //kony.store.clear();\nreturn frmLogin;\n\n",
            "parentId": null,
            "callbackType": null
        }]
    }
}